<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.4">Jekyll</generator><link href="http://yamakarov.ru/feed.xml" rel="self" type="application/atom+xml" /><link href="http://yamakarov.ru/" rel="alternate" type="text/html" /><updated>2018-12-06T17:43:35+03:00</updated><id>http://yamakarov.ru/feed.xml</id><title type="html">Записки Java программиста</title><subtitle>Блог о разработке web админок, CRM-ок и прочего. 
</subtitle><entry><title type="html">Многопоточность без использования локов</title><link href="http://yamakarov.ru/mutlithreading/2018/12/06/no-locks.html" rel="alternate" type="text/html" title="Многопоточность без использования локов" /><published>2018-12-06T17:39:00+03:00</published><updated>2018-12-06T17:39:00+03:00</updated><id>http://yamakarov.ru/mutlithreading/2018/12/06/no-locks</id><content type="html" xml:base="http://yamakarov.ru/mutlithreading/2018/12/06/no-locks.html">&lt;p&gt;Интересный пример избавления от локов с помощью &lt;a href=&quot;http://lucteo.ro/2018/11/18/look-ma-no-locks/&quot;&gt;очереди тасков&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Очень похоже на то что делают Executors в Java. 
Например сделав Executor, который выполняет входящие таски в один поток мы гарантируем, что только этот поток и имеет доступ к ресурсу.&lt;/p&gt;

&lt;p&gt;А с помощью Future можно избавиться от callback ада, и делать вид что все выполняется синхронно последовательно.&lt;/p&gt;</content><author><name></name></author><summary type="html">Интересный пример избавления от локов с помощью очереди тасков.</summary></entry><entry><title type="html">Java LinkedList</title><link href="http://yamakarov.ru/linked-list/2018/12/05/LinkedList.html" rel="alternate" type="text/html" title="Java LinkedList" /><published>2018-12-05T17:16:00+03:00</published><updated>2018-12-05T17:16:00+03:00</updated><id>http://yamakarov.ru/linked-list/2018/12/05/LinkedList</id><content type="html" xml:base="http://yamakarov.ru/linked-list/2018/12/05/LinkedList.html">&lt;p&gt;Не могу себе представить более странную структуру данных, чем LinkedList.
С одной стороны очевидно должны существовать ситуации в которых она показывает производительность лучшую чем у ArrayList.
Однако найти такой кейс оказывается сложно.
Хотя многие уверены, что он есть и активно минусуют &lt;a href=&quot;https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist-in-java/323889#323889&quot;&gt;ответ LinkedList - отстой&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Я надеялся, что хотя бы добавление в начала списка работает быстрее в случае LinkedList, но по ходу и это не так.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Benchmark                      Mode  Cnt     Score      Error  Units
ListBenchmark.testArrayList   thrpt    5  6260.096 ± 3249.035  ops/s
ListBenchmark.testLinkedList  thrpt    5     4.953 ±    1.743  ops/s
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Хотя, мой тест показывает только как драматично падает производительность при постоянном срабатывании GC.
Если же удалять перед добавлением, то получатся более похожие на правду результаты:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Benchmark                      Mode  Cnt         Score          Error  Units
ListBenchmark.testArrayList   thrpt    5     22450.002 ±     8560.238  ops/s
ListBenchmark.testLinkedList  thrpt    5  57681435.183 ± 28196927.137  ops/s
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;script src=&quot;https://gist.github.com/ymakarov/a4201d51e9210f8a5494cf35c2c6b0e5.js&quot;&gt;&lt;/script&gt;</content><author><name></name></author><summary type="html">Не могу себе представить более странную структуру данных, чем LinkedList. С одной стороны очевидно должны существовать ситуации в которых она показывает производительность лучшую чем у ArrayList. Однако найти такой кейс оказывается сложно. Хотя многие уверены, что он есть и активно минусуют ответ LinkedList - отстой.</summary></entry><entry><title type="html">Google Bigquery</title><link href="http://yamakarov.ru/highload/2018/12/04/bigquery.html" rel="alternate" type="text/html" title="Google Bigquery" /><published>2018-12-04T15:15:00+03:00</published><updated>2018-12-04T15:15:00+03:00</updated><id>http://yamakarov.ru/highload/2018/12/04/bigquery</id><content type="html" xml:base="http://yamakarov.ru/highload/2018/12/04/bigquery.html">&lt;p&gt;Хорошо зарекомендовавшее себя решение для анализа больших данных: &lt;a href=&quot;https://cloud.google.com/bigquery/&quot;&gt;Bigquery&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Можно залить огромные объемы информации и сравнительно дешево хранить их в облаке.
Сервис быстро выполняет запросы.&lt;/p&gt;

&lt;p&gt;Попал на мои радары, когда я искал публично доступные &lt;a href=&quot;https://console.cloud.google.com/marketplace/browse?q=BigQuery%20Public%20Data&amp;amp;project=api-project-751434121818&amp;amp;folder&amp;amp;organizationId&quot;&gt;наборы данных&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">Хорошо зарекомендовавшее себя решение для анализа больших данных: Bigquery.</summary></entry><entry><title type="html">Быстрый поиск по регулярным выражениям</title><link href="http://yamakarov.ru/software/2018/12/03/search-by-regexp.html" rel="alternate" type="text/html" title="Быстрый поиск по регулярным выражениям" /><published>2018-12-03T18:29:00+03:00</published><updated>2018-12-03T18:29:00+03:00</updated><id>http://yamakarov.ru/software/2018/12/03/search-by-regexp</id><content type="html" xml:base="http://yamakarov.ru/software/2018/12/03/search-by-regexp.html">&lt;p&gt;Случайно наткнулся на статью про &lt;a href=&quot;https://swtch.com/~rsc/regexp/regexp4.html&quot;&gt;реализацию поиска в Google Code&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Автор Рас Кокс рассказывает как реализовать поиск по регулярным выражениям.
Поднимаются вопросы безопасных регулярных выражений, как правильно готовить для продакшен систем, чтобы их нельзя было задедосить.
Приводится пример построения инвертированного индекса и дается краткая историческая справка по этому методу.
В конце даются инструменты командной строки для построения и поиска по индексу на локальной машине.&lt;/p&gt;</content><author><name></name></author><summary type="html">Случайно наткнулся на статью про реализацию поиска в Google Code.</summary></entry><entry><title type="html">NoSQL на пальцах</title><link href="http://yamakarov.ru/nosql/2018/11/30/nosql.html" rel="alternate" type="text/html" title="NoSQL на пальцах" /><published>2018-11-30T18:08:00+03:00</published><updated>2018-11-30T18:08:00+03:00</updated><id>http://yamakarov.ru/nosql/2018/11/30/nosql</id><content type="html" xml:base="http://yamakarov.ru/nosql/2018/11/30/nosql.html">&lt;p&gt;Популярная статья о сущности &lt;a href=&quot;https://use-the-index-luke.com/blog/2013-04/whats-left-of-nosql&quot;&gt;NoSQL&lt;/a&gt;.
Довольно старая, но не потерявшая актуальности.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;NoSQL - это не “нет” SQL, а да и еще чуть&lt;/li&gt;
  &lt;li&gt;Лучше было говорить про NoACID, однако ACID труднее продать&lt;/li&gt;
  &lt;li&gt;SQL - жив, потому что это удобный язык для описания данных&lt;/li&gt;
  &lt;li&gt;Это все про масштабируемость за счет снижения требований к достоверности, хотим чтобы не всегда выполнялось, а когда-нибудь в будущем выполнялось&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Популярная статья о сущности NoSQL. Довольно старая, но не потерявшая актуальности.</summary></entry><entry><title type="html">Просто о Paxos</title><link href="http://yamakarov.ru/distributed/2018/11/29/lamport-paxos.html" rel="alternate" type="text/html" title="Просто о Paxos" /><published>2018-11-29T18:16:00+03:00</published><updated>2018-11-29T18:16:00+03:00</updated><id>http://yamakarov.ru/distributed/2018/11/29/lamport-paxos</id><content type="html" xml:base="http://yamakarov.ru/distributed/2018/11/29/lamport-paxos.html">&lt;p&gt;Просто о Paxos не очень получается несмотря на название  &lt;a href=&quot;file:///Users/yakov.makarov/Documents/books/articles/paxos-made-simple.pdf&quot;&gt;Paxos made simple&lt;/a&gt;.
Мне сложно осознать этот материал.
Но в целом очень нравится стиль изложения Лампорта.
По ходу повествования вводятся новые и новые минимальные требования, чем доказывается их необходимость.
И когда все что можно придумать, введено, требуется доказать достаточность и готово!&lt;/p&gt;</content><author><name></name></author><summary type="html">Просто о Paxos не очень получается несмотря на название Paxos made simple. Мне сложно осознать этот материал. Но в целом очень нравится стиль изложения Лампорта. По ходу повествования вводятся новые и новые минимальные требования, чем доказывается их необходимость. И когда все что можно придумать, введено, требуется доказать достаточность и готово!</summary></entry><entry><title type="html">В уважающем себя языке должны быть макросы</title><link href="http://yamakarov.ru/rust/2018/11/28/macros.html" rel="alternate" type="text/html" title="В уважающем себя языке должны быть макросы" /><published>2018-11-28T18:36:00+03:00</published><updated>2018-11-28T18:36:00+03:00</updated><id>http://yamakarov.ru/rust/2018/11/28/macros</id><content type="html" xml:base="http://yamakarov.ru/rust/2018/11/28/macros.html">&lt;p&gt;Rust себя уважает, в нем есть &lt;a href=&quot;https://doc.rust-lang.org/book/2018-edition/appendix-04-macros.html&quot;&gt;макросы&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">Rust себя уважает, в нем есть макросы.</summary></entry><entry><title type="html">Особенности виртуальной памяти</title><link href="http://yamakarov.ru/os/2018/11/27/virtual-memory.html" rel="alternate" type="text/html" title="Особенности виртуальной памяти" /><published>2018-11-27T20:46:00+03:00</published><updated>2018-11-27T20:46:00+03:00</updated><id>http://yamakarov.ru/os/2018/11/27/virtual-memory</id><content type="html" xml:base="http://yamakarov.ru/os/2018/11/27/virtual-memory.html">&lt;p&gt;Нашел интересный способ познакомиться с устройством виртуальной памяти на моем ноутбуке.
Можно вызвать команду:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vm_stats
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Эта команда выводит статистику по использованию виртуальной памяти,
которая на моем компьютере выглядит вот так:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Pages free:                             1248077.
Pages active:                           1039334.
Pages inactive:                          681085.
Pages speculative:                       102637.
Pages throttled:                              0.
Pages wired down:                        947732.
Pages purgeable:                         165924.
&quot;Translation faults&quot;:                2872353573.
Pages copy-on-write:                   84084404.
Pages zero filled:                   1389615466.
Pages reactivated:                     32939465.
Pages purged:                          21042545.
File-backed pages:                       574634.
Anonymous pages:                        1248422.
Pages stored in compressor:             1060136.
Pages occupied by compressor:            175000.
Decompressions:                        71676136.
Compressions:                         102546494.
Pageins:                               32667988.
Pageouts:                                269292.
Swapins:                               21328597.
Swapouts:                              23569093.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Так как я не указал интервал, то выводится статистика за все время работы.
Если указать 1ms или 1s то статистика будет выводиться с заданным интервалом.&lt;/p&gt;

&lt;p&gt;Посмотреть, что значат эти числа можно в мануале.&lt;/p&gt;</content><author><name></name></author><summary type="html">Нашел интересный способ познакомиться с устройством виртуальной памяти на моем ноутбуке. Можно вызвать команду:</summary></entry><entry><title type="html">Чак Норрис запускает программы без операционной системы</title><link href="http://yamakarov.ru/software/2018/11/26/without-os.html" rel="alternate" type="text/html" title="Чак Норрис запускает программы без операционной системы" /><published>2018-11-26T18:07:00+03:00</published><updated>2018-11-26T18:07:00+03:00</updated><id>http://yamakarov.ru/software/2018/11/26/without-os</id><content type="html" xml:base="http://yamakarov.ru/software/2018/11/26/without-os.html">&lt;p&gt;Очень интересный ответ на StackOverflow про то как &lt;a href=&quot;https://stackoverflow.com/questions/22054578/how-to-run-a-program-without-an-operating-system/32483545#32483545&quot;&gt;запустить программу без использования операционной системы&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">Очень интересный ответ на StackOverflow про то как запустить программу без использования операционной системы.</summary></entry><entry><title type="html">Интересное введение в (Ре)Акторы</title><link href="http://yamakarov.ru/software/2018/11/23/multi-threading.html" rel="alternate" type="text/html" title="Интересное введение в (Ре)Акторы" /><published>2018-11-23T18:18:00+03:00</published><updated>2018-11-23T18:18:00+03:00</updated><id>http://yamakarov.ru/software/2018/11/23/multi-threading</id><content type="html" xml:base="http://yamakarov.ru/software/2018/11/23/multi-threading.html">&lt;p&gt;Понравились &lt;a href=&quot;http://ithare.com/multi-coring-and-non-blocking-instead-of-multi-threading-with-a-script/&quot;&gt;слайды про реакторы&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Особенно была интересная первая часть про требования и зачем нужна многопоточность.
И надо повнимательнее разобраться с третьей частью по результаты использования реакторов.
Они впечатляют, удалось снизить количество серверов в системе и при этом увеличить пропускную способность до космических значений.&lt;/p&gt;</content><author><name></name></author><summary type="html">Понравились слайды про реакторы.</summary></entry></feed>